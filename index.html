<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>卒研</title>
	<link rel="shortcut icon" href="TemplateData/favicon.ico">
	<script src="https://unpkg.com/blockly/blockly.min.js"></script>
	<script src="acorn_interpreter.js"></script>
	<script src="block_function.js"></script>
	<script src="myblock.js"></script>
	<link rel="stylesheet" href="workspace.css"></link>
</head>

<body>
	<div class="flex">
		<div class="middle">
			<div id="blocklyDiv" style="width: 650px; height: 640px;"></div> <!-- ワークスペースを用意 -->
			<xml id="toolbox" style="display: none">
				<category name="キャラ操作" colour="195">
					<block type="move_left"></block>
					<block type="move_right"></block>
					<block type="move_forward"></block>
					<block type="move_back"></block>
					<block type="turn_left"></block>
					<block type="turn_right"></block>
				</category>
				<category name="設置・破壊" colour="270">
					<block type="put_object"></block>
					<block type="destroy_obstacle"></block>					
					<block type="pick_bomb"></block>					
				</category>
				<category name="方向" colour="240">
					<block type="get_left"></block>
					<block type="get_right"></block>
					<block type="get_forward"></block>
					<block type="get_back"></block>				
				</category>
				<category name="オブジェクト" colour="235">
					<block type="wall"></block>
					<block type="coin"></block>
					<block type="player"></block>
					<block type="anything"></block>
					<block type="empty"></block>
					<block type="obstacle"></block>
					<block type="bomb"></block>
				</category>
				<category name="条件分岐" colour="210">
					<block type="controls_if"></block>
					<block type="controls_ifelse"></block>
					<block type="check_point"></block>
				</category>
				<category name="繰り返し" colour="120">
					<block type="controls_repeat_ext">
						<value name="TIMES">
							<block type="custom_number">
								<field name="number">3</field>
							</block>
						</value>
					</block>
				</category>
			</xml>
		</div>
		<div id="readOnlyParent" class="bottom">
			<div id="blocklyDiv_readOnly" style="width: 650px; height: 640px;"></div>
		</div>
		<canvas class="border border-success" id="unity-canvas"
		style="width: 600px; height: 640px; background: #FFFFFF; position: absolute; left: 660px"></canvas>
		<div id="blocklyDiv_rival" style="position: absolute; left: 1260px; width: 400px; height: 640px;"></div>
	</div>
	<script src="Build/web.loader.js"></script>
	<script>
		var unityInstance = null;
		createUnityInstance(document.querySelector("#unity-canvas"), {
		dataUrl: "Build/web.data",
		frameworkUrl: "Build/web.framework.js",
		codeUrl: "Build/web.wasm",
		streamingAssetsUrl: "StreamingAssets",
		companyName: "DefaultCompany",
		productName: "e1b19059_sotuken",
		productVersion: "0.1",
		}).then(x => unityInstance = x);
	</script>
	<script>
		let workspace = Blockly.inject('blocklyDiv', { toolbox: document.getElementById('toolbox'), scrollbars: true, trashcan: true, maxInstances: {'move_left': 3, 'move_right': 3, 'move_forward': 3, 'move_back': 3, 'controls_repeat_ext': 2, 'pick_bomb' : 2 }});
		let workspace_readOnly = Blockly.inject('blocklyDiv_readOnly', { readOnly:true, scrollbars: true });
		let workspace_rival = Blockly.inject('blocklyDiv_rival', { readOnly:true, scrollbars: true });
	</script>
</body>

</html>
